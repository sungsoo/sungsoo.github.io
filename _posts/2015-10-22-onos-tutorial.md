---
layout: post
title: Basic ONOS Tutorial
date: 2015-10-22
categories: [computer science]
tags: [big data]

---

## Article Source
* Title: [Basic ONOS Tutorial](https://wiki.onosproject.org/display/ONOS/Basic+ONOS+Tutorial)

---

# Basic ONOS Tutorial

## Introduction

<h2 id="BasicONOSTutorial-Pre-requisites"><span style="color: rgb(85,85,85);">Pre-requisites</span></h2><p>You will need a computer with at least 2GB of RAM and at least 5GB of free hard disk space. A faster processor or solid-state drive will speed up the virtual machine boot time, and a larger screen will help to manage multiple terminal windows.</p><p>The computer can run Windows, Mac OS X, or Linux – all work fine with VirtualBox, the only software requirement.</p><p>To install VirtualBox, you will need administrative access to the machine.</p><p><span style="color: rgb(85,85,85);">The tutorial instructions require prior knowledge of SDN in general, and OpenFlow and Mininet in particular. So please first complete the&nbsp;</span><a href="http://archive.openflow.org/wk/index.php/OpenFlow_Tutorial" class="external-link" rel="nofollow">OpenFlow tutorial</a><span style="color: rgb(85,85,85);">&nbsp;and the&nbsp;</span><a href="http://mininet.org/walkthrough/" class="external-link" rel="nofollow">Mininet walkthrough</a><span style="color: rgb(85,85,85);">. Although not a requirement, completing the&nbsp;</span><a href="https://openflow.stanford.edu/display/ONL/Flowvisor" class="external-link" rel="nofollow">FlowVisor tutorial</a><span style="color: rgb(85,85,85);">&nbsp;before starting this one is highly recommended. Also being familiar with&nbsp;<a href="http://karaf.apache.org/" class="external-link" rel="nofollow">Apache Karaf&nbsp;</a>would be helpful although not entirely required.</span></p><h2 id="BasicONOSTutorial-Stuck?Foundabug?Questions?"><span style="color: rgb(85,85,85);">Stuck? Found a bug? Questions?</span></h2><p><span style="color: rgb(85,85,85);">Email&nbsp;<a href="mailto:onos-discuss@googlegroups.com" class="external-link" rel="nofollow">us</a><span>&nbsp;if you’re stuck, think you’ve found a bug, or just want to send some feedback. Please have a look at the&nbsp;</span><a href="/display/ONOS/Mailing+Lists">guidelines</a><span>&nbsp;to learn how to efficiently submit a bug report.</span></span></p><h1 id="BasicONOSTutorial-Setupyourenvironment"><span style="color: rgb(85,85,85);">Set up your environment</span></h1><h2 id="BasicONOSTutorial-Installrequiredsoftware"><span style="color: rgb(85,85,85);">Install required software</span></h2><p>You will need to acquire two files: a&nbsp;<a href="https://www.virtualbox.org/" class="external-link" rel="nofollow">VirtualBox</a>&nbsp;installer and the&nbsp;<a href="http://downloads.onosproject.org/vm/onos-tutorial-1.2.1r2-ovf.zip" class="external-link" rel="nofollow">Tutorial VM</a>.<span style="color: rgb(85,85,85);">&nbsp;</span></p><p>After you have downloaded VirtualBox, install it, then go to the next section to verify that the VM is working on your system.</p><h2 id="BasicONOSTutorial-CreateVirtualMachine">Create Virtual Machine</h2><p>Double-click on the downloaded tutorial zipfile. This will give you an OVF file. Open the OVF file, this will open virtual box with an import dialog.</p><p><img class="confluence-embedded-image confluence-content-image-border image-center" src="https://wiki.onosproject.org/download/attachments/1638475/Screen%20Shot%202014-11-24%20at%2017.46.41.png?version=1&amp;modificationDate=1416869284589&amp;api=v2" data-image-src="https://wiki.onosproject.org/download/attachments/1638475/Screen%20Shot%202014-11-24%20at%2017.46.41.png?version=1&amp;modificationDate=1416869284589&amp;api=v2" height="416" width="500"></p><p>Click on import. When the import is finished start the VM and log in using:</p><p><strong>USERNAME: tutorial1</strong></p><p><strong>PASSWORD: tutorial1</strong></p><h2 id="BasicONOSTutorial-ImportantCommandPromptNotes"><span style="color: rgb(85,85,85);">Important Command Prompt Notes</span></h2><p>In this tutorial, commands are shown along with a command prompt to indicate the subsystem for which they are intended.</p><p>For example,</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<div><div id="highlighter_692941" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java plain">onos&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div><p>indicates that you are in the ONOS command line, whereas</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<div><div id="highlighter_328846" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java plain">mininet&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div><p>indicates that you are in mininet.</p><p>&nbsp;</p><h2 id="BasicONOSTutorial-Resetting">Resetting</h2><p>We have provided a simple mechanism which allows you to restart the tutorial from scratch. Simply, click on the 'Reset' icon on your desktop and this will reset ONOS to its initial state. It'll take a few seconds for ONOS to restart and during that time you may not be able to launch your ONOS cli.&nbsp;</p><h2 id="BasicONOSTutorial-StartMininet">Start Mininet</h2><p><span style="color: rgb(85,85,85);">We’ll be using the same physical topology for all exercises, so now is a good time to start Mininet. The network is a simple set of six switches where the outer switches are connected to two&nbsp;interconnection switches, which are connected together. The diagram below shows the topology.</span></p><p><span style="color: rgb(85,85,85);"><br></span></p><p style="text-align: center;"><span style="color: rgb(85,85,85);"><img class="confluence-embedded-image confluence-content-image-border" src="https://wiki.onosproject.org/download/attachments/1638475/Screen%20Shot%202014-12-02%20at%2015.01.50.png?version=1&amp;modificationDate=1417561471713&amp;api=v2" data-image-src="https://wiki.onosproject.org/download/attachments/1638475/Screen%20Shot%202014-12-02%20at%2015.01.50.png?version=1&amp;modificationDate=1417561471713&amp;api=v2" height="282" width="500"><br></span></p><p><span style="color: rgb(85,85,85);">Each of the outer switches has six hosts attached to it. <strong>To start mininet with this topology</strong>, simply double click on the Mininet icon on your desktop. To exit mininet, type CTRL-D or exit in the mininet prompt.</span></p><h2 id="BasicONOSTutorial-StartONOS"><span style="color: rgb(85,85,85);">Start ONOS</span></h2><p><span style="color: rgb(85,85,85);">Double-click the "Reset" icon on the desktop now. This will ensure the environment is clean and will start up ONOS.</span></p><h1 id="BasicONOSTutorial-ReactiveForwarding"><span style="color: rgb(0,0,0);">Reactive Forwarding</span></h1><p><em>Start by opening a console onto ONOS, you can do this by double clicking on the ONOS icon.</em></p><h3 id="BasicONOSTutorial-Nopings?Why?"><span style="color: rgb(0,0,0);">No pings? Why?</span></h3><p><span style="color: rgb(0,0,0);">&nbsp;</span>In this exercise, we are going to run a sample app shipped with ONOS. Reactive Forwarding is a simple application which installs flows for every packet in that arrives at the controller. Go to your mininet prompt and do the following.</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<div><div id="highlighter_680033" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java plain">mininet&gt; h11 ping h41</code></div></div></td></tr></tbody></table></div></div>
</div></div><p>&nbsp;</p><p>You will notice that the ping fails as shown below.</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<div><div id="highlighter_897470" class="syntaxhighlighter nogutter  text"><div class="toolbar"><span></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="text plain">mininet&gt; h11 ping -c3 h41</code></div><div class="line number2 index1 alt1"><code class="text plain">PING 10.0.0.19 (10.0.0.19) 56(84) bytes of data.</code></div><div class="line number3 index2 alt2"><code class="text plain">From 10.0.0.1 icmp_seq=1 Destination Host Unreachable</code></div><div class="line number4 index3 alt1"><code class="text plain">From 10.0.0.1 icmp_seq=2 Destination Host Unreachable</code></div><div class="line number5 index4 alt2"><code class="text plain">From 10.0.0.1 icmp_seq=3 Destination Host Unreachable</code></div><div class="line number6 index5 alt1"><code class="text plain">--- 10.0.0.19 ping statistics ---</code></div><div class="line number7 index6 alt2"><code class="text plain">3 packets transmitted, 0 received, +3 errors, 100% packet loss, time 2009ms</code></div></div></td></tr></tbody></table></div></div>
</div></div><p>&nbsp;</p><p>So why did the ping fail? Well we didn't load the reactive forwarding application. Indeed, if you list the loaded applications you will see the following:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<div><div id="highlighter_134520" class="syntaxhighlighter nogutter  text"><div class="toolbar"><span></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="text plain">onos&gt; apps -a -s</code></div><div class="line number2 index1 alt1"><code class="text plain">*&nbsp;&nbsp; 3 org.onosproject.drivers&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1.2.2.SNAPSHOT Builtin device drivers</code></div><div class="line number3 index2 alt2"><code class="text plain">*&nbsp; 24 org.onosproject.openflow&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1.2.2.SNAPSHOT OpenFlow protocol southbound providers</code></div></div></td></tr></tbody></table></div></div>
</div></div><p>As you can see above, there is no reactive forwarding application loaded. Let's see how we load it.</p><h3 id="BasicONOSTutorial-Makeitso,Numberone">Make it so, Number one</h3><p>In your ONOS window, do</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<div><div id="highlighter_430602" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java plain">onos&gt; app activate org.onosproject.fwd</code></div></div></td></tr></tbody></table></div></div>
</div></div><p>&nbsp;</p><p>Then, in a mininet window run the ping again, just this time don't limit the number of pings.</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<div><div id="highlighter_512941" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java plain">mininet&gt; h11 ping h41</code></div></div></td></tr></tbody></table></div></div>
</div></div><p>This time the ping is flowing:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<div><div id="highlighter_511477" class="syntaxhighlighter nogutter  text"><div class="toolbar"><span></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="text plain">mininet&gt; h11 ping h41</code></div><div class="line number2 index1 alt1"><code class="text plain">PING 10.0.0.19 (10.0.0.19) 56(84) bytes of data.</code></div><div class="line number3 index2 alt2"><code class="text plain">64 bytes from 10.0.0.19: icmp_req=1 ttl=64 time=9.12 ms</code></div><div class="line number4 index3 alt1"><code class="text plain">64 bytes from 10.0.0.19: icmp_req=2 ttl=64 time=0.892 ms</code></div><div class="line number5 index4 alt2"><code class="text plain">64 bytes from 10.0.0.19: icmp_req=3 ttl=64 time=0.075 ms</code></div><div class="line number6 index5 alt1"><code class="text plain">64 bytes from 10.0.0.19: icmp_req=4 ttl=64 time=0.068 ms</code></div></div></td></tr></tbody></table></div></div>
</div></div><h3 id="BasicONOSTutorial-Startstopstartstop....">Start stop start stop....</h3><p>You have now seen that you can load applications into ONOS dynamically. Actually you can also interrupt applications while they are running so, for example, let's stop the reactive forwarding application.</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<div><div id="highlighter_637031" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java plain">onos&gt; app deactivate org.onosproject.fwd</code></div></div></td></tr></tbody></table></div></div>
</div></div><p>Observe that the ping has now stopped. This is because when the reactive forwarding application is unloaded, it cleans up after itself by removing the rules that it has pushed. We'll talk more about this in the next section. For now, let's restart the reactive forwarding application.</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<div><div id="highlighter_944654" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java plain">onos&gt; app activate org.onosproject.fwd</code></div></div></td></tr></tbody></table></div></div>
</div></div><p>...and the ping restarts&nbsp;<img class="emoticon emoticon-wink" src="/s/en_GB/5637/e1ef10868e8fe2f234a1a0b171b01cde1d9717c4.36/_/images/icons/emoticons/wink.png" data-emoticon-name="wink" alt="(wink)">&nbsp;</p><h1 id="BasicONOSTutorial-ONOSCLIcommands">ONOS CLI commands</h1><p>ONOS has many CLI commands. In this section, we will go through some of the most useful commands. This section may also serve as a CLI reference for you during this tutorial. While we will explain some of the ONOS CLI commands here you can find an exhaustive list by running:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<div><div id="highlighter_685705" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java plain">onos&gt; help onos</code></div></div></td></tr></tbody></table></div></div>
</div></div><p>or more information about an individual command adding&nbsp;<em>--help</em> to any command. Also most commands have autocompletion to help you find the parameters quickly and easily.</p><h4 id="BasicONOSTutorial-Devicescommand">Devices command</h4><p>An SDN Controller would be nothing without devices to control. Luckily, ONOS has a convenient command to list the device currently known in the system. Running</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<div><div id="highlighter_777405" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java plain">onos&gt; devices</code></div></div></td></tr></tbody></table></div></div>
</div></div><p>will return the following information,</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<div><div id="highlighter_539830" class="syntaxhighlighter nogutter  text"><div class="toolbar"><span></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="text plain">onos&gt; devices</code></div><div class="line number2 index1 alt1"><code class="text plain">id=of:0000000000000001, available=true, role=MASTER, type=SWITCH, mfr=Nicira, Inc., hw=Open vSwitch, sw=2.1.3, serial=None, protocol=OF_10</code></div><div class="line number3 index2 alt2"><code class="text plain">id=of:0000000000000002, available=true, role=MASTER, type=SWITCH, mfr=Nicira, Inc., hw=Open vSwitch, sw=2.1.3, serial=None, protocol=OF_10</code></div><div class="line number4 index3 alt1"><code class="text plain">id=of:000000000000000b, available=true, role=MASTER, type=SWITCH, mfr=Nicira, Inc., hw=Open vSwitch, sw=2.1.3, serial=None, protocol=OF_10</code></div><div class="line number5 index4 alt2"><code class="text plain">id=of:000000000000000c, available=true, role=MASTER, type=SWITCH, mfr=Nicira, Inc., hw=Open vSwitch, sw=2.1.3, serial=None, protocol=OF_10</code></div><div class="line number6 index5 alt1"><code class="text plain">id=of:000000000000000d, available=true, role=MASTER, type=SWITCH, mfr=Nicira, Inc., hw=Open vSwitch, sw=2.1.3, serial=None, protocol=OF_10</code></div><div class="line number7 index6 alt2"><code class="text plain">id=of:000000000000000e, available=true, role=MASTER, type=SWITCH, mfr=Nicira, Inc., hw=Open vSwitch, sw=2.1.3, serial=None, protocol=OF_10</code></div></div></td></tr></tbody></table></div></div>
</div></div><p>which consists of a device id, and a boolean value which indicates whether this devices is currently up. You also get the type of device and well as it's role relationship with this ONOS instance.</p><h4 id="BasicONOSTutorial-Linkscommand">Links command</h4><p>&nbsp;The&nbsp;<em>links&nbsp;</em>command is used to list the links detected by ONOS. At the ONOS prompt run</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<div><div id="highlighter_806390" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java plain">onos&gt; links</code></div></div></td></tr></tbody></table></div></div>
</div></div><p>and you should get the following output:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<div><div id="highlighter_526384" class="syntaxhighlighter nogutter  text"><div class="toolbar"><span></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="text plain">onos&gt; links</code></div><div class="line number2 index1 alt1"><code class="text plain">src=of:000000000000000e/1, dst=of:0000000000000001/5, type=DIRECT, state=ACTIVE</code></div><div class="line number3 index2 alt2"><code class="text plain">src=of:000000000000000d/1, dst=of:0000000000000001/4, type=DIRECT, state=ACTIVE</code></div><div class="line number4 index3 alt1"><code class="text plain">src=of:000000000000000e/2, dst=of:0000000000000002/5, type=DIRECT, state=ACTIVE</code></div><div class="line number5 index4 alt2"><code class="text plain">src=of:000000000000000c/1, dst=of:0000000000000001/3, type=DIRECT, state=ACTIVE</code></div><div class="line number6 index5 alt1"><code class="text plain">src=of:000000000000000d/2, dst=of:0000000000000002/4, type=DIRECT, state=ACTIVE</code></div><div class="line number7 index6 alt2"><code class="text plain">src=of:000000000000000b/1, dst=of:0000000000000001/2, type=DIRECT, state=ACTIVE</code></div><div class="line number8 index7 alt1"><code class="text plain">src=of:000000000000000c/2, dst=of:0000000000000002/3, type=DIRECT, state=ACTIVE</code></div><div class="line number9 index8 alt2"><code class="text plain">src=of:000000000000000b/2, dst=of:0000000000000002/2, type=DIRECT, state=ACTIVE</code></div><div class="line number10 index9 alt1"><code class="text plain">src=of:0000000000000002/2, dst=of:000000000000000b/2, type=DIRECT, state=ACTIVE</code></div><div class="line number11 index10 alt2"><code class="text plain">src=of:0000000000000001/2, dst=of:000000000000000b/1, type=DIRECT, state=ACTIVE</code></div><div class="line number12 index11 alt1"><code class="text plain">src=of:0000000000000002/3, dst=of:000000000000000c/2, type=DIRECT, state=ACTIVE</code></div><div class="line number13 index12 alt2"><code class="text plain">src=of:0000000000000001/3, dst=of:000000000000000c/1, type=DIRECT, state=ACTIVE</code></div><div class="line number14 index13 alt1"><code class="text plain">src=of:0000000000000002/4, dst=of:000000000000000d/2, type=DIRECT, state=ACTIVE</code></div><div class="line number15 index14 alt2"><code class="text plain">src=of:0000000000000001/4, dst=of:000000000000000d/1, type=DIRECT, state=ACTIVE</code></div><div class="line number16 index15 alt1"><code class="text plain">src=of:0000000000000002/5, dst=of:000000000000000e/2, type=DIRECT, state=ACTIVE</code></div><div class="line number17 index16 alt2"><code class="text plain">src=of:0000000000000001/5, dst=of:000000000000000e/1, type=DIRECT, state=ACTIVE</code></div><div class="line number18 index17 alt1"><code class="text plain">src=of:0000000000000002/1, dst=of:0000000000000001/1, type=DIRECT, state=ACTIVE</code></div><div class="line number19 index18 alt2"><code class="text plain">src=of:0000000000000001/1, dst=of:0000000000000002/1, type=DIRECT, state=ACTIVE</code></div></div></td></tr></tbody></table></div></div>
</div></div><p>The output shows you the list of discovered links. Reported links are formatted by source device-port pair to destination device-port pair. The&nbsp;'type' field indicates whether the link is a direct connection between two devices or not.&nbsp;</p><h4 id="BasicONOSTutorial-Hostscommand">Hosts command</h4><p>A network without hosts is a little like a city without bars, it would be a ridiculously boring place. Fortunately, ONOS has the ability to list the hosts (as opposed to bars, although that would be a great feature) currently in the system.</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<div><div id="highlighter_326258" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java plain">onos&gt; hosts</code></div></div></td></tr></tbody></table></div></div>
</div></div><p>with this output:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<div><div id="highlighter_471289" class="syntaxhighlighter nogutter  text"><div class="toolbar"><span></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="text plain">onos&gt; hosts</code></div><div class="line number2 index1 alt1"><code class="text plain">id=00:00:00:00:00:01/-1, mac=00:00:00:00:00:01, location=of:000000000000000b/3, vlan=-1, ip(s)=[10.0.0.1]</code></div><div class="line number3 index2 alt2"><code class="text plain">id=00:00:00:00:00:13/-1, mac=00:00:00:00:00:13, location=of:000000000000000e/3, vlan=-1, ip(s)=[10.0.0.19]</code></div></div></td></tr></tbody></table></div></div>
</div></div><p>Which displays the hosts' id as well as its mac address and where in the network it is connected. The '-1' in the id field is used to display the vlan information, in this case there is no vlan&nbsp;<img class="emoticon emoticon-wink" src="/s/en_GB/5637/e1ef10868e8fe2f234a1a0b171b01cde1d9717c4.36/_/images/icons/emoticons/wink.png" data-emoticon-name="wink" alt="(wink)">.</p><h4 id="BasicONOSTutorial-Flowscommand">Flows command</h4><p>The <em>flows</em> command allows you to observe which flow entries are currently registered in the system. Flow entries may be in several states:</p><ul><li><strong>PENDING_ADD -&nbsp;</strong>The flow has been submitted and forwarded to the switch.</li><li><strong>ADDED -&nbsp;</strong>The flow has been added to the switch.</li><li><strong>PENDING_REMOVE -&nbsp;</strong>The request to remove the flow has been submitted and forwarded to the switch.</li><li><strong>REMOVED -&nbsp;</strong>The rule has been removed.</li></ul><p>So let's start some traffic but going to the mininet window and running</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<div><div id="highlighter_823575" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java plain">mininet&gt; h11 ping h41</code></div></div></td></tr></tbody></table></div></div>
</div></div><p>then in the ONOS window let's run the flows command</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<div><div id="highlighter_141969" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java plain">onos&gt; flows</code></div></div></td></tr></tbody></table></div></div>
</div></div><p>you should see the following output</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<div><div id="highlighter_132534" class="syntaxhighlighter nogutter  text"><div class="toolbar"><span></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="text plain">deviceId=of:0000000000000001, flowRuleCount=1</code></div><div class="line number2 index1 alt1"><code class="text spaces">&nbsp;&nbsp;&nbsp;</code><code class="text plain">id=30000b889cb32, state=ADDED, bytes=8722, packets=89, duration=89, priority=10, appId=org.onlab.onos.fwd</code></div><div class="line number3 index2 alt2"><code class="text spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="text plain">selector=[ETH_TYPE{ethType=800}, ETH_SRC{mac=00:00:00:00:00:01}, ETH_DST{mac=00:00:00:00:00:13}, IN_PORT{port=2}]</code></div><div class="line number4 index3 alt1"><code class="text spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="text plain">treatment=[OUTPUT{port=5}]</code></div><div class="line number5 index4 alt2"><code class="text plain">deviceId=of:0000000000000002, flowRuleCount=1</code></div><div class="line number6 index5 alt1"><code class="text spaces">&nbsp;&nbsp;&nbsp;</code><code class="text plain">id=30000b889cf4d, state=ADDED, bytes=8624, packets=88, duration=88, priority=10, appId=org.onlab.onos.fwd</code></div><div class="line number7 index6 alt2"><code class="text spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="text plain">selector=[ETH_TYPE{ethType=800}, ETH_SRC{mac=00:00:00:00:00:13}, ETH_DST{mac=00:00:00:00:00:01}, IN_PORT{port=5}]</code></div><div class="line number8 index7 alt1"><code class="text spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="text plain">treatment=[OUTPUT{port=2}]</code></div><div class="line number9 index8 alt2"><code class="text plain">deviceId=of:000000000000000b, flowRuleCount=2</code></div><div class="line number10 index9 alt1"><code class="text spaces">&nbsp;&nbsp;&nbsp;</code><code class="text plain">id=30000b88a8321, state=ADDED, bytes=8722, packets=89, duration=89, priority=10, appId=org.onlab.onos.fwd</code></div><div class="line number11 index10 alt2"><code class="text spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="text plain">selector=[ETH_TYPE{ethType=800}, ETH_SRC{mac=00:00:00:00:00:13}, ETH_DST{mac=00:00:00:00:00:01}, IN_PORT{port=2}]</code></div><div class="line number12 index11 alt1"><code class="text spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="text plain">treatment=[OUTPUT{port=3}]</code></div><div class="line number13 index12 alt2"><code class="text spaces">&nbsp;&nbsp;&nbsp;</code><code class="text plain">id=30000b88a833e, state=ADDED, bytes=8722, packets=89, duration=89, priority=10, appId=org.onlab.onos.fwd</code></div><div class="line number14 index13 alt1"><code class="text spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="text plain">selector=[ETH_TYPE{ethType=800}, ETH_SRC{mac=00:00:00:00:00:01}, ETH_DST{mac=00:00:00:00:00:13}, IN_PORT{port=3}]</code></div><div class="line number15 index14 alt2"><code class="text spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="text plain">treatment=[OUTPUT{port=1}]</code></div><div class="line number16 index15 alt1"><code class="text plain">deviceId=of:000000000000000c, flowRuleCount=0</code></div><div class="line number17 index16 alt2"><code class="text plain">deviceId=of:000000000000000d, flowRuleCount=0</code></div><div class="line number18 index17 alt1"><code class="text plain">deviceId=of:000000000000000e, flowRuleCount=2</code></div><div class="line number19 index18 alt2"><code class="text spaces">&nbsp;&nbsp;&nbsp;</code><code class="text plain">id=30000b88a8e45, state=ADDED, bytes=8722, packets=89, duration=89, priority=10, appId=org.onlab.onos.fwd</code></div><div class="line number20 index19 alt1"><code class="text spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="text plain">selector=[ETH_TYPE{ethType=800}, ETH_SRC{mac=00:00:00:00:00:01}, ETH_DST{mac=00:00:00:00:00:13}, IN_PORT{port=1}]</code></div><div class="line number21 index20 alt2"><code class="text spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="text plain">treatment=[OUTPUT{port=3}]</code></div><div class="line number22 index21 alt1"><code class="text spaces">&nbsp;&nbsp;&nbsp;</code><code class="text plain">id=30000b88a8e82, state=ADDED, bytes=8722, packets=89, duration=89, priority=10, appId=org.onlab.onos.fwd</code></div><div class="line number23 index22 alt2"><code class="text spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="text plain">selector=[ETH_TYPE{ethType=800}, ETH_SRC{mac=00:00:00:00:00:13}, ETH_DST{mac=00:00:00:00:00:01}, IN_PORT{port=3}]</code></div><div class="line number24 index23 alt1"><code class="text spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="text plain">treatment=[OUTPUT{port=2}]</code></div></div></td></tr></tbody></table></div></div>
</div></div><p>As you can see from the above output, ONOS provides many details about he the flows at the switches. For example each flow entry defines a selector and treatment which is the set of traffic matched by the the flow entry and how this traffic should be handled. Notice as well that each flow entry it tagged by an <em>appId</em> (application id), this&nbsp;<em>appId</em> identifies which application installed this flow entry. This is a useful feature because it can help an admin identify which application may be misbehaving or consuming many resources.</p><h4 id="BasicONOSTutorial-Pathscommand">Paths command</h4><p>Given a network topology, ONOS computes all the shortest paths between any two nodes. &nbsp;This is especially useful for your applications to obtain path information for either flow installation or some other use. The paths command takes two arguments, both of them are devices. To make things easy for you ONOS provides CLI autocompletion by simply hitting the &lt;TAB&gt; key.</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<div><div id="highlighter_947284" class="syntaxhighlighter nogutter  text"><div class="toolbar"><span></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="text plain">onos&gt; paths &lt;TAB&gt;</code></div><div class="line number2 index1 alt1"><code class="text plain">of:0000000000000001&nbsp;&nbsp; of:0000000000000002&nbsp;&nbsp; of:000000000000000b&nbsp;&nbsp; </code></div><div class="line number3 index2 alt2"><code class="text plain">of:000000000000000c&nbsp;&nbsp; of:000000000000000d&nbsp;&nbsp; of:000000000000000e</code></div></div></td></tr></tbody></table></div></div>
</div></div><p>ONOS lists device options for you, thereby making it easier to find the devices you would like. For example, the output of the command below shows two paths of equal costs.</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<div><div id="highlighter_842967" class="syntaxhighlighter nogutter  text"><div class="toolbar"><span></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="text plain">onos&gt; paths of:000000000000000b of:000000000000000e </code></div><div class="line number2 index1 alt1"><code class="text plain">of:000000000000000b/1-of:0000000000000001/2==&gt;of:0000000000000001/5-of:000000000000000e/1; cost=2.0</code></div><div class="line number3 index2 alt2"><code class="text plain">of:000000000000000b/2-of:0000000000000002/2==&gt;of:0000000000000002/5-of:000000000000000e/2; cost=2.0</code></div></div></td></tr></tbody></table></div></div>
</div></div><h4 id="BasicONOSTutorial-IntentCommand">Intent Command</h4><p>The intent command allows one to see what intents are stored in the system. Intents can be in several states:</p><ul><li><strong>SUBMITTED -&nbsp;</strong>The intent has been submitted and will be processed soon.</li><li><strong>COMPILING -&nbsp;</strong>The intent is being compiled. This is a transient state.</li><li><strong>INSTALLING -&nbsp;</strong>The intent is in the process of being installed.&nbsp;</li><li><strong>INSTALLED -&nbsp;</strong>The intent has been installed.</li><li><strong>RECOMPILING -&nbsp;</strong>The intent is being recompiled after a failure.</li><li><strong>WITHDRAWING -&nbsp;</strong>The intent is being withdrawn.</li><li><strong>WITHDRAWN -&nbsp;</strong>The intent has been removed.</li><li><strong>FAILED -&nbsp;</strong>The intent is in a failed state because it cannot be satisfied.</li></ul><p>For more information about Intents go <a href="/display/ONOS/Intent+Framework">here</a>.</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<div><div id="highlighter_110183" class="syntaxhighlighter nogutter  text"><div class="toolbar"><span></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="text plain">onos&gt; intents</code></div><div class="line number2 index1 alt1"><code class="text plain">id=0x0, state=INSTALLED, type=HostToHostIntent, appId=org.onlab.onos.gui</code></div><div class="line number3 index2 alt2"><code class="text spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="text plain">constraints=[LinkTypeConstraint{inclusive=false, types=[OPTICAL]}]</code></div><div class="line number4 index3 alt1"><code class="text plain">id=0x1, state=WITHDRAWN, type=HostToHostIntent, appId=org.onlab.onos.cli</code></div><div class="line number5 index4 alt2"><code class="text spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="text plain">constraints=[LinkTypeConstraint{inclusive=false, types=[OPTICAL]}]</code></div></div></td></tr></tbody></table></div></div>
</div></div><p><em>Note: You will not see any intents until some have been added. In the next section of the tutorial, you will load the intent reactive forwarding application, which automatically adds intents as needed.</em></p><p>The command can also tell you what type of sub-intents the intent has been compiled to:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<div><div id="highlighter_346576" class="syntaxhighlighter nogutter  text"><div class="toolbar"><span></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="text plain">onos&gt; intents -i</code></div><div class="line number2 index1 alt1"><code class="text plain">id=0x2, state=INSTALLED, type=HostToHostIntent, appId=org.onlab.onos.ifwd</code></div><div class="line number3 index2 alt2"><code class="text spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="text plain">constraints=[LinkTypeConstraint{inclusive=false, types=[OPTICAL]}]</code></div><div class="line number4 index3 alt1"><code class="text spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="text plain">installable=[</code></div><div class="line number5 index4 alt2"><code class="text plain">PathIntent{id=0x4, appId=DefaultApplicationId{id=2, name=org.onlab.onos.ifwd},&nbsp;</code></div><div class="line number6 index5 alt1"><code class="text spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="text plain">selector=DefaultTrafficSelector{criteria=[ETH_SRC{mac=00:00:00:00:00:0D}, ETH_DST{mac=00:00:00:00:00:07}]},&nbsp;</code></div><div class="line number7 index6 alt2"><code class="text spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="text plain">treatment=DefaultTrafficTreatment{instructions=[]}, constraints=[LinkTypeConstraint{inclusive=false, types=[OPTICAL]}], </code></div><div class="line number8 index7 alt1"><code class="text spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="text plain">path=DefaultPath{src=ConnectPoint{elementId=00:00:00:00:00:0D/-1, portNumber=0},</code></div><div class="line number9 index8 alt2"><code class="text spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="text plain">dst=ConnectPoint{elementId=00:00:00:00:00:07/-1, portNumber=0}, type=INDIRECT, state=ACTIVE, durable=false}},</code></div><div class="line number10 index9 alt1"><code class="text plain">PathIntent{id=0x5, appId=DefaultApplicationId{id=2, name=org.onlab.onos.ifwd},</code></div><div class="line number11 index10 alt2"><code class="text spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="text plain">selector=DefaultTrafficSelector{criteria=[ETH_SRC{mac=00:00:00:00:00:07}, ETH_DST{mac=00:00:00:00:00:0D}]},</code></div><div class="line number12 index11 alt1"><code class="text spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="text plain">treatment=DefaultTrafficTreatment{instructions=[]}, constraints=[LinkTypeConstraint{inclusive=false, types=[OPTICAL]}],&nbsp;&nbsp;&nbsp;&nbsp; </code></div><div class="line number13 index12 alt2"><code class="text spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="text plain">path=DefaultPath{src=ConnectPoint{elementId=00:00:00:00:00:07/-1, portNumber=0},&nbsp;</code></div><div class="line number14 index13 alt1"><code class="text spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="text plain">dst=ConnectPoint{elementId=00:00:00:00:00:0D/-1, portNumber=0}, type=INDIRECT, state=ACTIVE, durable=false}}]</code></div></div></td></tr></tbody></table></div></div>
</div></div><p>For example, this host to host intent has been compiled to two path intents with the appropriate traffic selections and actions computed on your behalf.</p><h1 id="BasicONOSTutorial-IntentReactiveForwarding">Intent Reactive Forwarding</h1><p>Another sample application in ONOS is the intent reactive forwarding application. Rather than pushing flow entries for each packet it sees, the intent reactive forwarding application provisions an intent. In particular, it provisions a host to host intent which is a simple connectivity intent which enables the connectivity between two hosts.&nbsp;</p><h2 id="BasicONOSTutorial-Outwiththeold,Inwiththenew">Out with the old, In with the new</h2><p>First let's start by removing the old reactive forwarding application and load the intent reactive forwarding application.</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<div><div id="highlighter_274113" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java plain">onos&gt; app deactivate org.onosproject.fwd</code></div><div class="line number2 index1 alt1"><code class="java plain">onos&gt; app activate org.onosproject.ifwd</code></div></div></td></tr></tbody></table></div></div>
</div></div><p><strong>NB: Notice the different bundle names: </strong>onos-app-fwd vs. onos-app-<strong>i</strong>fwd (<strong>Hint:&nbsp;</strong>there is an extra 'i'&nbsp;<img class="emoticon emoticon-wink" src="/s/en_GB/5637/e1ef10868e8fe2f234a1a0b171b01cde1d9717c4.36/_/images/icons/emoticons/wink.png" data-emoticon-name="wink" alt="(wink)">)</p><p>Ok let's just make sure it is loaded correctly:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<div><div id="highlighter_200011" class="syntaxhighlighter nogutter  text"><div class="toolbar"><span></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="text plain">onos&gt; apps -s -a</code></div><div class="line number2 index1 alt1"><code class="text plain">*&nbsp;&nbsp; 5 org.onosproject.drivers&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1.2.1&nbsp;&nbsp;&nbsp; Builtin device drivers</code></div><div class="line number3 index2 alt2"><code class="text plain">*&nbsp; 10 org.onosproject.ifwd&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1.2.1&nbsp;&nbsp;&nbsp; Reactive forwarding application using intent service (experimental)</code></div><div class="line number4 index3 alt1"><code class="text plain">*&nbsp; 30 org.onosproject.openflow&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1.2.1&nbsp;&nbsp;&nbsp; OpenFlow protocol southbound providers</code></div></div></td></tr></tbody></table></div></div>
</div></div><p>So we can see that the intent forwarding application is correctly active. The appId for the Reactive Forwarding application remains, so if you reload that application it will get the same appId it had previously.</p><h2 id="BasicONOSTutorial-IntentionallyReact">Intentionally React</h2><p>Alright so let's forward some traffic.&nbsp;</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<div><div id="highlighter_625493" class="syntaxhighlighter nogutter  text"><div class="toolbar"><span></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="text plain">mininet&gt; h21 ping h31</code></div><div class="line number2 index1 alt1"><code class="text plain">PING 10.0.0.13 (10.0.0.13) 56(84) bytes of data.</code></div><div class="line number3 index2 alt2"><code class="text plain">64 bytes from 10.0.0.13: icmp_seq=1 ttl=64 time=25.7 ms</code></div><div class="line number4 index3 alt1"><code class="text plain">64 bytes from 10.0.0.13: icmp_seq=2 ttl=64 time=1.73 ms</code></div><div class="line number5 index4 alt2"><code class="text plain">64 bytes from 10.0.0.13: icmp_seq=3 ttl=64 time=0.191 ms</code></div><div class="line number6 index5 alt1"><code class="text plain">64 bytes from 10.0.0.13: icmp_seq=4 ttl=64 time=0.079 ms</code></div><div class="line number7 index6 alt2"><code class="text plain">^C</code></div><div class="line number8 index7 alt1"><code class="text plain">--- 10.0.0.13 ping statistics ---</code></div><div class="line number9 index8 alt2"><code class="text plain">4 packets transmitted, 4 received, 0% packet loss, time 3005ms</code></div><div class="line number10 index9 alt1"><code class="text plain">rtt min/avg/max/mdev = 0.079/6.926/25.700/10.859 ms</code></div></div></td></tr></tbody></table></div></div>
</div></div><p>&nbsp;</p><p>So by using the flows command you can list the flows (by running the <em>flows</em> command) that the intent installed. So how is this different than the other application? Well the end result is the same but the process by which it was obtained it radically different. The intent reactive forwarding application has installed an intent between h21 and h31, as you can see by running the <em>intents</em> command:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<div><div id="highlighter_615114" class="syntaxhighlighter nogutter  text"><div class="toolbar"><span></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="text plain">onos&gt; intents -i</code></div><div class="line number2 index1 alt1"><code class="text plain">id=0x0, state=INSTALLED, type=HostToHostIntent, appId=org.onlab.onos.ifwd</code></div><div class="line number3 index2 alt2"><code class="text spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="text plain">constraints=[LinkTypeConstraint{inclusive=false, types=[OPTICAL]}]</code></div><div class="line number4 index3 alt1"><code class="text spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="text plain">installable=[</code></div><div class="line number5 index4 alt2"><code class="text plain">PathIntent{id=0x1, appId=DefaultApplicationId{id=2, name=org.onlab.onos.ifwd},&nbsp;</code></div><div class="line number6 index5 alt1"><code class="text spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="text plain">selector=DefaultTrafficSelector{criteria=[ETH_SRC{mac=00:00:00:00:00:0D}, ETH_DST{mac=00:00:00:00:00:07}]},&nbsp;</code></div><div class="line number7 index6 alt2"><code class="text spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="text plain">treatment=DefaultTrafficTreatment{instructions=[]}, constraints=[LinkTypeConstraint{inclusive=false, types=[OPTICAL]}], </code></div><div class="line number8 index7 alt1"><code class="text spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="text plain">path=DefaultPath{src=ConnectPoint{elementId=00:00:00:00:00:0D/-1, portNumber=0},</code></div><div class="line number9 index8 alt2"><code class="text spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="text plain">dst=ConnectPoint{elementId=00:00:00:00:00:07/-1, portNumber=0}, type=INDIRECT, state=ACTIVE, durable=false}},</code></div><div class="line number10 index9 alt1"><code class="text plain">PathIntent{id=0x2, appId=DefaultApplicationId{id=2, name=org.onlab.onos.ifwd},</code></div><div class="line number11 index10 alt2"><code class="text spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="text plain">selector=DefaultTrafficSelector{criteria=[ETH_SRC{mac=00:00:00:00:00:07}, ETH_DST{mac=00:00:00:00:00:0D}]},</code></div><div class="line number12 index11 alt1"><code class="text spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="text plain">treatment=DefaultTrafficTreatment{instructions=[]}, constraints=[LinkTypeConstraint{inclusive=false, types=[OPTICAL]}],&nbsp;&nbsp;&nbsp;&nbsp; </code></div><div class="line number13 index12 alt2"><code class="text spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="text plain">path=DefaultPath{src=ConnectPoint{elementId=00:00:00:00:00:07/-1, portNumber=0},&nbsp;</code></div><div class="line number14 index13 alt1"><code class="text spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="text plain">dst=ConnectPoint{elementId=00:00:00:00:00:0D/-1, portNumber=0}, type=INDIRECT, state=ACTIVE, durable=false}}]</code></div></div></td></tr></tbody></table></div></div>
</div></div><p>&nbsp;</p><p>So the intent forwarding app has pushed the intent you see above as evidenced by the appId field. The intent is a host to host intent which details the path along which the flows have been installed. If you would like to know more about intents or the intent framework in general have a look at this <a href="/display/ONOS/Intent+Framework">page</a>.</p><p>Before we continue, let's remove the intent you just installed so that it doesn't get in the way of the intent gymnastics we are going to do in the next section.</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<div><div id="highlighter_479488" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java plain">onos&gt; remove-intent org.onosproject.ifwd &lt;TAB&gt;</code></div><div class="line number2 index1 alt1"><code class="java plain">onos&gt; purge-intents</code></div></div></td></tr></tbody></table></div></div>
</div></div><p>The &lt;tab&gt; key will autocomplete the id that was associated the intent we just pushed. You should now see that there are no intents in the system.</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<div><div id="highlighter_14419" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java plain">onos&gt; intents</code></div></div></td></tr></tbody></table></div></div>
</div></div><p>This command will return nothing as there are no intents in the system.</p><h1 id="BasicONOSTutorial-Stateyourintentions">State your intentions</h1><p>One major advantage of using intents over simply using flow entries to program your network is that intents track the state of the network and reconfigure themselves in order to satisfy your intention. For example, if link were to go down the intent framework would reroute your intent (ie. your flows) onto an alternative path. But, what if there are no alternative path? Well, in this case the intent would enter the failed state and remain there until a path becomes available. Pretty cool, eh? Let's check this out in action.</p><p>Let's start by looking at the set of hosts know to ONOS. If you ran through this tutorial exactly there should be four hosts&nbsp;</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<div><div id="highlighter_893816" class="syntaxhighlighter nogutter  text"><div class="toolbar"><span></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="text plain">onos&gt; hosts</code></div><div class="line number2 index1 alt1"><code class="text plain">id=00:00:00:00:00:01/-1, mac=00:00:00:00:00:01, location=of:000000000000000b/3, vlan=-1, ip(s)=[10.0.0.1]</code></div><div class="line number3 index2 alt2"><code class="text plain">id=00:00:00:00:00:07/-1, mac=00:00:00:00:00:07, location=of:000000000000000c/3, vlan=-1, ip(s)=[10.0.0.7]</code></div><div class="line number4 index3 alt1"><code class="text plain">id=00:00:00:00:00:0D/-1, mac=00:00:00:00:00:0D, location=of:000000000000000d/3, vlan=-1, ip(s)=[10.0.0.13]</code></div><div class="line number5 index4 alt2"><code class="text plain">id=00:00:00:00:00:13/-1, mac=00:00:00:00:00:13, location=of:000000000000000e/3, vlan=-1, ip(s)=[10.0.0.19]</code></div></div></td></tr></tbody></table></div></div>
</div></div><p>&nbsp;</p><p>Pick any any of these two hosts and install a host to host intent for them.&nbsp;</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<div><div id="highlighter_136855" class="syntaxhighlighter nogutter  text"><div class="toolbar"><span></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="text plain">onos&gt; add-host-intent 00:00:00:00:00:01/-1 00:00:00:00:00:13/-1</code></div></div></td></tr></tbody></table></div></div>
</div></div><p>This command will provision a path between 10.0.0.1 (h11) and 10.0.0.19 (h41) and you can see that the intent is installed.</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<div><div id="highlighter_144699" class="syntaxhighlighter nogutter  text"><div class="toolbar"><span></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="text plain">onos&gt; intents</code></div><div class="line number2 index1 alt1"><code class="text plain">id=0x9, state=INSTALLED, type=HostToHostIntent, appId=org.onlab.onos.cli</code></div><div class="line number3 index2 alt2"><code class="text spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="text plain">constraints=[LinkTypeConstraint{inclusive=false, types=[OPTICAL]}]</code></div></div></td></tr></tbody></table></div></div>
</div></div><p>So now that the intent is installed let's have a look what path it is using.&nbsp;<strong>Be careful</strong> here as the output from the tutorial and what you see may vary slightly as all alternate paths here have equal cost and therefore ONOS is free to pick either one.</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<div><div id="highlighter_82867" class="syntaxhighlighter nogutter  text"><div class="toolbar"><span></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="text plain">onos&gt; flows</code></div><div class="line number2 index1 alt1"><code class="text plain">deviceId=of:0000000000000001, flowRuleCount=2</code></div><div class="line number3 index2 alt2"><code class="text spaces">&nbsp;&nbsp;&nbsp;</code><code class="text plain">id=10000c364dd58, state=ADDED, bytes=0, packets=0, duration=1781, priority=123, appId=org.onlab.onos.net.intent</code></div><div class="line number4 index3 alt1"><code class="text spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="text plain">selector=[IN_PORT{port=2}, ETH_SRC{mac=00:00:00:00:00:01}, ETH_DST{mac=00:00:00:00:00:13}]</code></div><div class="line number5 index4 alt2"><code class="text spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="text plain">treatment=[OUTPUT{port=5}]</code></div><div class="line number6 index5 alt1"><code class="text spaces">&nbsp;&nbsp;&nbsp;</code><code class="text plain">id=10000c364ddb2, state=ADDED, bytes=0, packets=0, duration=1781, priority=123, appId=org.onlab.onos.net.intent</code></div><div class="line number7 index6 alt2"><code class="text spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="text plain">selector=[IN_PORT{port=5}, ETH_SRC{mac=00:00:00:00:00:13}, ETH_DST{mac=00:00:00:00:00:01}]</code></div><div class="line number8 index7 alt1"><code class="text spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="text plain">treatment=[OUTPUT{port=2}]</code></div><div class="line number9 index8 alt2"><code class="text plain">deviceId=of:0000000000000002, flowRuleCount=0</code></div><div class="line number10 index9 alt1"><code class="text plain">deviceId=of:000000000000000b, flowRuleCount=2</code></div><div class="line number11 index10 alt2"><code class="text spaces">&nbsp;&nbsp;&nbsp;</code><code class="text plain">id=10000c3659528, state=ADDED, bytes=0, packets=0, duration=1781, priority=123, appId=org.onlab.onos.net.intent</code></div><div class="line number12 index11 alt1"><code class="text spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="text plain">selector=[IN_PORT{port=1}, ETH_SRC{mac=00:00:00:00:00:13}, ETH_DST{mac=00:00:00:00:00:01}]</code></div><div class="line number13 index12 alt2"><code class="text spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="text plain">treatment=[OUTPUT{port=3}]</code></div><div class="line number14 index13 alt1"><code class="text spaces">&nbsp;&nbsp;&nbsp;</code><code class="text plain">id=10000c3659564, state=ADDED, bytes=0, packets=0, duration=1781, priority=123, appId=org.onlab.onos.net.intent</code></div><div class="line number15 index14 alt2"><code class="text spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="text plain">selector=[IN_PORT{port=3}, ETH_SRC{mac=00:00:00:00:00:01}, ETH_DST{mac=00:00:00:00:00:13}]</code></div><div class="line number16 index15 alt1"><code class="text spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="text plain">treatment=[OUTPUT{port=1}]</code></div><div class="line number17 index16 alt2"><code class="text plain">deviceId=of:000000000000000c, flowRuleCount=0</code></div><div class="line number18 index17 alt1"><code class="text plain">deviceId=of:000000000000000d, flowRuleCount=0</code></div><div class="line number19 index18 alt2"><code class="text plain">deviceId=of:000000000000000e, flowRuleCount=2</code></div><div class="line number20 index19 alt1"><code class="text spaces">&nbsp;&nbsp;&nbsp;</code><code class="text plain">id=10000c365a06b, state=ADDED, bytes=0, packets=0, duration=1781, priority=123, appId=org.onlab.onos.net.intent</code></div><div class="line number21 index20 alt2"><code class="text spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="text plain">selector=[IN_PORT{port=1}, ETH_SRC{mac=00:00:00:00:00:01}, ETH_DST{mac=00:00:00:00:00:13}]</code></div><div class="line number22 index21 alt1"><code class="text spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="text plain">treatment=[OUTPUT{port=3}]</code></div><div class="line number23 index22 alt2"><code class="text spaces">&nbsp;&nbsp;&nbsp;</code><code class="text plain">id=10000c365a0a7, state=ADDED, bytes=0, packets=0, duration=1781, priority=123, appId=org.onlab.onos.net.intent</code></div><div class="line number24 index23 alt1"><code class="text spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="text plain">selector=[IN_PORT{port=3}, ETH_SRC{mac=00:00:00:00:00:13}, ETH_DST{mac=00:00:00:00:00:01}]</code></div><div class="line number25 index24 alt2"><code class="text spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="text plain">treatment=[OUTPUT{port=1}]</code></div></div></td></tr></tbody></table></div></div>
</div></div><p>We can see that the traffic flows between dpid 00:00:00:00:00:00:00:01 (s1) and&nbsp;00:00:00:00:00:00:00:0b (s11). If you have trouble seeing this, refer to the topology diagram in the beginning of this tutorial.</p><p>&nbsp;</p><p>Ok so let's teardown the link between s1 and s11, you may have to teardown the link between s2 and s11 so pay attention to the flows command output. This can be done in mininet by running:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<div><div id="highlighter_860389" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java plain">mininet&gt; link s1 s11 down</code></div></div></td></tr></tbody></table></div></div>
</div></div><p>and let's have a look at the flows again.</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<div><div id="highlighter_654077" class="syntaxhighlighter nogutter  text"><div class="toolbar"><span></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="text plain">onos&gt; flows</code></div><div class="line number2 index1 alt1"><code class="text plain">deviceId=of:0000000000000001, flowRuleCount=0</code></div><div class="line number3 index2 alt2"><code class="text plain">deviceId=of:0000000000000002, flowRuleCount=2</code></div><div class="line number4 index3 alt1"><code class="text spaces">&nbsp;&nbsp;&nbsp;</code><code class="text plain">id=10000c364e119, state=ADDED, bytes=0, packets=0, duration=1, priority=123, appId=org.onlab.onos.net.intent</code></div><div class="line number5 index4 alt2"><code class="text spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="text plain">selector=[IN_PORT{port=2}, ETH_SRC{mac=00:00:00:00:00:01}, ETH_DST{mac=00:00:00:00:00:13}]</code></div><div class="line number6 index5 alt1"><code class="text spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="text plain">treatment=[OUTPUT{port=5}]</code></div><div class="line number7 index6 alt2"><code class="text spaces">&nbsp;&nbsp;&nbsp;</code><code class="text plain">id=10000c364e173, state=ADDED, bytes=0, packets=0, duration=1, priority=123, appId=org.onlab.onos.net.intent</code></div><div class="line number8 index7 alt1"><code class="text spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="text plain">selector=[IN_PORT{port=5}, ETH_SRC{mac=00:00:00:00:00:13}, ETH_DST{mac=00:00:00:00:00:01}]</code></div><div class="line number9 index8 alt2"><code class="text spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="text plain">treatment=[OUTPUT{port=2}]</code></div><div class="line number10 index9 alt1"><code class="text plain">deviceId=of:000000000000000b, flowRuleCount=2</code></div><div class="line number11 index10 alt2"><code class="text spaces">&nbsp;&nbsp;&nbsp;</code><code class="text plain">id=10000c3659547, state=ADDED, bytes=0, packets=0, duration=1, priority=123, appId=org.onlab.onos.net.intent</code></div><div class="line number12 index11 alt1"><code class="text spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="text plain">selector=[IN_PORT{port=2}, ETH_SRC{mac=00:00:00:00:00:13}, ETH_DST{mac=00:00:00:00:00:01}]</code></div><div class="line number13 index12 alt2"><code class="text spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="text plain">treatment=[OUTPUT{port=3}]</code></div><div class="line number14 index13 alt1"><code class="text spaces">&nbsp;&nbsp;&nbsp;</code><code class="text plain">id=10000c3659565, state=ADDED, bytes=0, packets=0, duration=1, priority=123, appId=org.onlab.onos.net.intent</code></div><div class="line number15 index14 alt2"><code class="text spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="text plain">selector=[IN_PORT{port=3}, ETH_SRC{mac=00:00:00:00:00:01}, ETH_DST{mac=00:00:00:00:00:13}]</code></div><div class="line number16 index15 alt1"><code class="text spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="text plain">treatment=[OUTPUT{port=2}]</code></div><div class="line number17 index16 alt2"><code class="text plain">deviceId=of:000000000000000c, flowRuleCount=0</code></div><div class="line number18 index17 alt1"><code class="text plain">deviceId=of:000000000000000d, flowRuleCount=0</code></div><div class="line number19 index18 alt2"><code class="text plain">deviceId=of:000000000000000e, flowRuleCount=2</code></div><div class="line number20 index19 alt1"><code class="text spaces">&nbsp;&nbsp;&nbsp;</code><code class="text plain">id=10000c365a08a, state=ADDED, bytes=0, packets=0, duration=1, priority=123, appId=org.onlab.onos.net.intent</code></div><div class="line number21 index20 alt2"><code class="text spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="text plain">selector=[IN_PORT{port=2}, ETH_SRC{mac=00:00:00:00:00:01}, ETH_DST{mac=00:00:00:00:00:13}]</code></div><div class="line number22 index21 alt1"><code class="text spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="text plain">treatment=[OUTPUT{port=3}]</code></div><div class="line number23 index22 alt2"><code class="text spaces">&nbsp;&nbsp;&nbsp;</code><code class="text plain">id=10000c365a0a8, state=ADDED, bytes=0, packets=0, duration=1, priority=123, appId=org.onlab.onos.net.intent</code></div><div class="line number24 index23 alt1"><code class="text spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="text plain">selector=[IN_PORT{port=3}, ETH_SRC{mac=00:00:00:00:00:13}, ETH_DST{mac=00:00:00:00:00:01}]</code></div><div class="line number25 index24 alt2"><code class="text spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="text plain">treatment=[OUTPUT{port=2}]</code></div></div></td></tr></tbody></table></div></div>
</div></div><p>Observe that the flows moved from&nbsp;&nbsp;00:00:00:00:00:00:00:01 to&nbsp;&nbsp;00:00:00:00:00:00:00:02 (s2) and the remaining flows remained untouched. How did this happen? Well when we tore down the link between s1 and s11, ONOS detected this change and informed all people interested by this event that the link went down. Therefore the intent service receives this information and realises that one of its intents is affected by this change and thus it recompiles the intent in light of this change which causes the intent to be installed on a different path.</p><p>This simple example shows that using intents is more powerful than simply installing flows. Intents maintain your intention (hence the name!) while retaining the ability to install them as is possible or most efficient.&nbsp;</p><h2 id="BasicONOSTutorial-Updownupdown">Up down up down</h2><p>If you wish you can take down more links and see what happens. Obviously, if you partition the network then no flows will be installed, sadly ONOS doesn't grow links between switches yet. You can bring up links in mininet by:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<div><div id="highlighter_691675" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java plain">mininet&gt; link s1 s11 up</code></div></div></td></tr></tbody></table></div></div>
</div></div><p>Have fun!</p><h1 id="BasicONOSTutorial-ONOSGraphicalUserInterface">ONOS Graphical User Interface</h1><p>First , lets reload our reactive forwarding application.</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<div><div id="highlighter_89794" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java plain">onos&gt; app deactivate org.onosproject.ifwd</code></div><div class="line number2 index1 alt1"><code class="java plain">onos&gt; app activate org.onosproject.fwd</code></div></div></td></tr></tbody></table></div></div>
</div></div><p>&nbsp;</p><p>ONOS comes with a GUI. The GUI allows you to manipulate your network in a simple way.</p><p>To open the UI simply click on the 'ONOS GUI' icon. Initially, when the UI loads up you will see your network's topology over a map of the US. You can remove the map by hitting 'b'. In fact, the UI has a cheat sheet which can be toggled by hitting '/' which is easy to remember because it's the question mark key except you don't need to hit shift.&nbsp;</p><p>Ok let's make all the hosts appear in the UI, we can do this by making the hosts talk on the network. The best way to do this is to run the pingall command at mininet.</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<div><div id="highlighter_676636" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java plain">mininet&gt; pingall</code></div><div class="line number2 index1 alt1"><code class="java plain">*** Ping: testing ping reachability&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code></div><div class="line number3 index2 alt2"><code class="java plain">h11 -&gt; h12 h13 h14 h15 h16 h21 h22 h23 h24 h25 h26 h31 h32 h33 h34 h35 h36 h41 h42 h43 h44 h45 h46&nbsp; </code></div><div class="line number4 index3 alt1"><code class="java plain">h12 -&gt; h11 h13 h14 h15 h16 h21 h22 h23 h24 h25 h26 h31 h32 h33 h34 h35 h36 h41 h42 h43 h44 h45 h46&nbsp; </code></div><div class="line number5 index4 alt2"><code class="java plain">h13 -&gt; h11 h12 h14 h15 h16 h21 h22 h23 h24 h25 h26 h31 h32 h33 h34 h35 h36 h41 h42 h43 h44 h45 h46&nbsp; </code></div><div class="line number6 index5 alt1"><code class="java plain">h14 -&gt; h11 h12 h13 h15 h16 h21 h22 h23 h24 h25 h26 h31 h32 h33 h34 h35 h36 h41 h42 h43 h44 h45 h46&nbsp; </code></div><div class="line number7 index6 alt2"><code class="java plain">h15 -&gt; h11 h12 h13 h14 h16 h21 h22 h23 h24 h25 h26 h31 h32 h33 h34 h35 h36 h41 h42 h43 h44 h45 h46&nbsp; </code></div><div class="line number8 index7 alt1"><code class="java plain">h16 -&gt; h11 h12 h13 h14 h15 h21 h22 h23 h24 h25 h26 h31 h32 h33 h34 h35 h36 h41 h42 h43 h44 h45 h46&nbsp; </code></div><div class="line number9 index8 alt2"><code class="java plain">h21 -&gt; h11 h12 h13 h14 h15 h16 h22 h23 h24 h25 h26 h31 h32 h33 h34 h35 h36 h41 h42 h43 h44 h45 h46&nbsp; </code></div><div class="line number10 index9 alt1"><code class="java plain">h22 -&gt; h11 h12 h13 h14 h15 h16 h21 h23 h24 h25 h26 h31 h32 h33 h34 h35 h36 h41 h42 h43 h44 h45 h46&nbsp; </code></div><div class="line number11 index10 alt2"><code class="java plain">.....</code></div></div></td></tr></tbody></table></div></div>
</div></div><p><strong>The hosts will not appear initially</strong>, simply type 'h' in your browser window and they will appear.&nbsp;At this point you should see something roughly similar to the image below.&nbsp;</p><p><img class="confluence-embedded-image confluence-content-image-border image-center" src="https://wiki.onosproject.org/download/attachments/1638475/Screen%20Shot%202014-11-24%20at%2016.23.33.png?version=1&amp;modificationDate=1416864320924&amp;api=v2" data-image-src="https://wiki.onosproject.org/download/attachments/1638475/Screen%20Shot%202014-11-24%20at%2016.23.33.png?version=1&amp;modificationDate=1416864320924&amp;api=v2" height="278" width="500"></p><p>&nbsp;</p><h2 id="BasicONOSTutorial-GUIFeatures">GUI Features</h2><h3 id="BasicONOSTutorial-GUICheatSheet">GUI Cheat Sheet</h3><p>At anytime you can pull up the GUI's cheat sheet by typing '/' (which is '?' without the pesky shift&nbsp;<img class="emoticon emoticon-wink" src="/s/en_GB/5637/e1ef10868e8fe2f234a1a0b171b01cde1d9717c4.36/_/images/icons/emoticons/wink.png" data-emoticon-name="wink" alt="(wink)">) and you will get a pane that looks like below.</p><p><img class="confluence-embedded-image confluence-content-image-border image-center" src="https://wiki.onosproject.org/download/attachments/1638475/Screen%20Shot%202014-12-02%20at%2015.03.42.png?version=1&amp;modificationDate=1417561471773&amp;api=v2" data-image-src="https://wiki.onosproject.org/download/attachments/1638475/Screen%20Shot%202014-12-02%20at%2015.03.42.png?version=1&amp;modificationDate=1417561471773&amp;api=v2" height="746" width="460"></p><h3 id="BasicONOSTutorial-Summarypane">Summary pane</h3><p>The GUI comes with a very useful summary pane. It shows you a &nbsp;summary of what is going on at this ONOS cluster.</p><p><img class="confluence-embedded-image confluence-content-image-border image-center" src="https://wiki.onosproject.org/download/attachments/1638475/Screen%20Shot%202014-11-24%20at%2016.45.58.png?version=1&amp;modificationDate=1416865632740&amp;api=v2" data-image-src="https://wiki.onosproject.org/download/attachments/1638475/Screen%20Shot%202014-11-24%20at%2016.45.58.png?version=1&amp;modificationDate=1416865632740&amp;api=v2" height="435" width="500"></p><h3 id="BasicONOSTutorial-Switchdetails">Switch details</h3><p>When you click on a switch a pane appears on the right hand side. This pane gives information about the switch as shown in the image below.</p><p><img class="confluence-embedded-image confluence-content-image-border image-center" src="https://wiki.onosproject.org/download/attachments/1638475/Screen%20Shot%202014-11-24%20at%2016.39.38.png?version=1&amp;modificationDate=1416865254033&amp;api=v2" data-image-src="https://wiki.onosproject.org/download/attachments/1638475/Screen%20Shot%202014-11-24%20at%2016.39.38.png?version=1&amp;modificationDate=1416865254033&amp;api=v2" height="328" width="500"></p><p>You my notice that the UI reports nine ports but you can only see eight, this is because OpenFlow switches have virtual ports that are hard to show on a UI.&nbsp;</p><p>Shift click will unselect the switch and remove the pane</p><h3 id="BasicONOSTutorial-Instances">Instances</h3><p>The GUI has the ability to show which ONOS instances are active. By hitting the 'i' key (it will be open by default) you will see a pane show up on the left hand side as shown below.</p><p><img class="confluence-embedded-image confluence-content-image-border image-center" src="https://wiki.onosproject.org/download/attachments/1638475/Screen%20Shot%202014-11-24%20at%2016.32.19.png?version=1&amp;modificationDate=1416864816503&amp;api=v2" data-image-src="https://wiki.onosproject.org/download/attachments/1638475/Screen%20Shot%202014-11-24%20at%2016.32.19.png?version=1&amp;modificationDate=1416864816503&amp;api=v2" height="391" width="500"></p><p>Notice that the glyphs for the switches changes color, this indicates which switches are controlled by which instance. This is useful to see at a glance which switches are controlled by which ONOS instance.</p><h3 id="BasicONOSTutorial-InstallIntent">Install Intent</h3><p>Ok let's install an intent using the UI. First select two hosts by clicking on one host then shift-click on another. Let's pick 10.0.0.20 and 10.0.0.9. Now a pane will appear on the right and side of the screen as here:</p><p><img class="confluence-embedded-image confluence-content-image-border image-center" src="https://wiki.onosproject.org/download/attachments/1638475/Screen%20Shot%202014-11-24%20at%2017.07.26.png?version=1&amp;modificationDate=1416866929091&amp;api=v2" data-image-src="https://wiki.onosproject.org/download/attachments/1638475/Screen%20Shot%202014-11-24%20at%2017.07.26.png?version=1&amp;modificationDate=1416866929091&amp;api=v2" height="292" width="500"></p><p>Now click on 'Create Host-to-host Flow', this actually provisions a host to host intent and lights up the path used by the intent.&nbsp;</p><p><img class="confluence-embedded-image confluence-content-image-border image-center" src="https://wiki.onosproject.org/download/attachments/1638475/Screen%20Shot%202014-11-24%20at%2017.09.26.png?version=1&amp;modificationDate=1416867039997&amp;api=v2" data-image-src="https://wiki.onosproject.org/download/attachments/1638475/Screen%20Shot%202014-11-24%20at%2017.09.26.png?version=1&amp;modificationDate=1416867039997&amp;api=v2" height="274" width="500"></p><p>You can check that the intent was installed via the ONOS cli</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<div><div id="highlighter_816538" class="syntaxhighlighter nogutter  text"><div class="toolbar"><span></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="text plain">onos&gt; intents </code></div><div class="line number2 index1 alt1"><code class="text spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="text plain">id=0x223838ca, state=INSTALLED, type=HostToHostIntent, appId=org.onlab.onos.gui</code></div><div class="line number3 index2 alt2"><code class="text spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="text plain">[LinkTypeConstraint{inclusive=false, types=[OPTICAL]}]</code></div></div></td></tr></tbody></table></div></div>
</div></div><p>Now let's send some traffic on that intent. This will animate the link to show traffic and display how much traffic (counter value) is flowing through that link</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<div><div id="highlighter_890605" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java plain">mininet&gt; h42 ping h23</code></div></div></td></tr></tbody></table></div></div>
</div></div><p>&nbsp;</p><p><img class="confluence-embedded-image confluence-content-image-border image-center" src="https://wiki.onosproject.org/download/attachments/1638475/Screen%20Shot%202014-11-24%20at%2017.14.33.png?version=1&amp;modificationDate=1416867364733&amp;api=v2" data-image-src="https://wiki.onosproject.org/download/attachments/1638475/Screen%20Shot%202014-11-24%20at%2017.14.33.png?version=1&amp;modificationDate=1416867364733&amp;api=v2" height="281" width="500"></p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><h3 id="BasicONOSTutorial-Showalltraffic">Show all traffic</h3><p>Another thing you can do is activate the 'All Traffic' mode in the UI. This will show you any traffic that is running on the network. Activate this command by hitting 'a'.</p><h2 id="BasicONOSTutorial-Playon">Play on</h2><p>Now you know the main features of the UI. We encourage you to play around with it to find out what other features you can use and who knows may find a few bugs.</p><h1 id="BasicONOSTutorial-ExploringFurther">Exploring Further</h1><p><span style="color: rgb(85,85,85);">Here we just scratched the surface of what ONOS can do in terms of controlling a network. We highly encourage you to continue using ONOS and perhaps start developing your own applications. Find out how to get started in <a href="/display/ONOS/Template+Application+Tutorial">this&nbsp;tutorial</a>.